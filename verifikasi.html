<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verifikasi Akun - CarRental</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 450px;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(to right, #2c3e50, #4a6491);
            color: white;
            padding: 25px 20px;
            text-align: center;
            position: relative;
        }

        .header h1 {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .header p {
            font-size: 14px;
            opacity: 0.9;
        }

        .verification-type {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255, 255, 255, 0.2);
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .content {
            padding: 30px;
        }

        .verification-method {
            margin-bottom: 25px;
        }

        .method-title {
            font-size: 18px;
            color: #2c3e50;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .method-options {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .option {
            flex: 1;
            text-align: center;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option:hover {
            border-color: #3498db;
        }

        .option.active {
            border-color: #3498db;
            background-color: #f0f8ff;
        }

        .option i {
            font-size: 24px;
            margin-bottom: 8px;
            color: #3498db;
        }

        .option span {
            display: block;
            font-size: 14px;
            font-weight: 500;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #2c3e50;
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-control:focus {
            border-color: #3498db;
            outline: none;
        }

        .btn {
            display: block;
            width: 100%;
            padding: 14px;
            background: linear-gradient(to right, #3498db, #2c3e50);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .code-inputs {
            display: flex;
            justify-content: space-between;
            margin-bottom: 25px;
        }

        .code-input {
            width: 50px;
            height: 50px;
            text-align: center;
            font-size: 20px;
            font-weight: bold;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            transition: all 0.3s;
        }

        .code-input:focus {
            border-color: #3498db;
            outline: none;
            box-shadow: 0 0 5px rgba(52, 152, 219, 0.5);
        }

        .resend {
            text-align: center;
            margin-top: 20px;
            font-size: 14px;
        }

        .resend a {
            color: #3498db;
            text-decoration: none;
            font-weight: 500;
        }

        .resend a:hover {
            text-decoration: underline;
        }

        .footer {
            text-align: center;
            padding: 20px;
            background-color: #f8f9fa;
            color: #6c757d;
            font-size: 14px;
        }

        .hidden {
            display: none;
        }

        .success-message {
            text-align: center;
            padding: 20px;
            background-color: #d4edda;
            color: #155724;
            border-radius: 8px;
            margin-top: 20px;
        }

        .error-message {
            text-align: center;
            padding: 10px;
            background-color: #f8d7da;
            color: #721c24;
            border-radius: 8px;
            margin-top: 10px;
            font-size: 14px;
        }

        .car-icon {
            font-size: 40px;
            margin-bottom: 10px;
        }

        .info-box {
            background-color: #e8f4fd;
            border-left: 4px solid #3498db;
            padding: 12px 15px;
            margin-bottom: 20px;
            border-radius: 0 8px 8px 0;
            font-size: 14px;
        }

        .user-info {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
        }

        .user-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #3498db, #2c3e50);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            font-size: 24px;
        }
        
        .signin-notice {
            text-align: center;
            margin-top: 20px;
            padding: 15px;
            background-color: #fff3cd;
            border-radius: 8px;
            border-left: 4px solid #ffc107;
        }
        
        .signup-notice {
            text-align: center;
            margin-top: 20px;
            padding: 15px;
            background-color: #d1ecf1;
            border-radius: 8px;
            border-left: 4px solid #17a2b8;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="verification-type" id="verification-type">Sign Up</div>
            <div class="car-icon">
                <i class="fas fa-car"></i>
            </div>
            <h1 id="page-title">Verifikasi Akun Anda</h1>
            <p id="page-description">Lengkapi verifikasi untuk mengakses layanan rental mobil kami</p>
        </div>

        <div class="content">
            <!-- Info box untuk Sign In -->
            <div id="signin-info" class="info-box hidden">
                <i class="fas fa-shield-alt"></i> Untuk keamanan akun Anda, kami mengirimkan kode verifikasi dua faktor.
            </div>
            
            <!-- Info box untuk Sign Up -->
            <div id="signup-info" class="info-box">
                <i class="fas fa-user-plus"></i> Verifikasi diperlukan untuk memastikan email/nomor telepon Anda valid.
            </div>



            <div class="verification-method">
                <div class="method-title">Pilih Metode Verifikasi</div>
                <div class="method-options">
                    <div class="option active" data-method="email">
                        <i class="fas fa-envelope"></i>
                        <span>Email</span>
                    </div>
                    <div class="option" data-method="sms">
                        <i class="fas fa-mobile-alt"></i>
                        <span>SMS</span>
                    </div>
                </div>
            </div>

            <div id="email-form">
                <div class="form-group">
                    <label for="email" id="email-label">Email Terdaftar</label>
                    <input type="email" id="email" class="form-control" placeholder="nama@contoh.com">
                </div>
            </div>

            <div id="sms-form" class="hidden">
                <div class="form-group">
                    <label for="phone" id="phone-label">Nomor Telepon</label>
                    <input type="tel" id="phone" class="form-control" placeholder="+62 812-3456-7890">
                </div>
            </div>

            <button id="send-code" class="btn">Kirim Kode Verifikasi</button>

            <div id="verification-code" class="hidden">
                <div class="form-group">
                    <label id="code-label">Masukkan Kode Verifikasi</label>
                    <div class="code-inputs">
                        <input type="text" class="code-input" maxlength="1" data-index="0">
                        <input type="text" class="code-input" maxlength="1" data-index="1">
                        <input type="text" class="code-input" maxlength="1" data-index="2">
                        <input type="text" class="code-input" maxlength="1" data-index="3">
                        <input type="text" class="code-input" maxlength="1" data-index="4">
                        <input type="text" class="code-input" maxlength="1" data-index="5">
                    </div>
                </div>
                <button id="verify-code" class="btn">Verifikasi</button>
                <div class="resend">
                    Tidak menerima kode? <a href="#" id="resend-link">Kirim ulang</a>
                </div>
            </div>
            
            <!-- Notice untuk Sign In -->
            <div id="signin-notice" class="signin-notice hidden">
                <i class="fas fa-info-circle"></i> Kode verifikasi ini berlaku selama 10 menit.
            </div>
            
            <!-- Notice untuk Sign Up -->
            <div id="signup-notice" class="signup-notice">
                <i class="fas fa-info-circle"></i> Setelah verifikasi, Anda dapat langsung menikmati layanan kami.
            </div>

            <div id="success-message" class="success-message hidden">
                <i class="fas fa-check-circle" style="font-size: 40px; margin-bottom: 10px;"></i>
                <h3 id="success-title">Verifikasi Berhasil!</h3>
                <p id="success-description">Akun Anda telah terverifikasi. Anda akan diarahkan ke halaman utama dalam <span id="countdown">5</span> detik.</p>
            </div>

            <div id="error-message" class="error-message hidden">
                Kode verifikasi tidak valid. Silakan coba lagi.
            </div>
        </div>

        <div class="footer">
            &copy; 2025 CarRental. Semua hak dilindungi.
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Elements
            const verificationTypeElement = document.getElementById('verification-type');
            const pageTitleElement = document.getElementById('page-title');
            const pageDescriptionElement = document.getElementById('page-description');
            const signinInfoElement = document.getElementById('signin-info');
            const signupInfoElement = document.getElementById('signup-info');
            const userInfoElement = document.getElementById('user-info');
            const userNameElement = document.getElementById('user-name');
            const userEmailElement = document.getElementById('user-email');
            const emailLabelElement = document.getElementById('email-label');
            const phoneLabelElement = document.getElementById('phone-label');
            const codeLabelElement = document.getElementById('code-label');
            const successTitleElement = document.getElementById('success-title');
            const successDescriptionElement = document.getElementById('success-description');
            const signinNoticeElement = document.getElementById('signin-notice');
            const signupNoticeElement = document.getElementById('signup-notice');
            
            const methodOptions = document.querySelectorAll('.option');
            const emailForm = document.getElementById('email-form');
            const smsForm = document.getElementById('sms-form');
            const sendCodeBtn = document.getElementById('send-code');
            const verificationCodeSection = document.getElementById('verification-code');
            const codeInputs = document.querySelectorAll('.code-input');
            const verifyCodeBtn = document.getElementById('verify-code');
            const resendLink = document.getElementById('resend-link');
            const successMessage = document.getElementById('success-message');
            const errorMessage = document.getElementById('error-message');
            const countdownElement = document.getElementById('countdown');

            // Variables
            let currentMethod = 'email';
            let generatedCode = '';
            let countdown;
            let isSignUp = true;

            // Check URL parameters to determine if it's Sign Up or Sign In
            function checkVerificationType() {
                const urlParams = new URLSearchParams(window.location.search);
                const type = urlParams.get('type');
                
                console.log('URL Parameters:', urlParams.toString());
                console.log('Type parameter:', type);
                
                if (type === 'signin') {
                    isSignUp = false;
                    updateUIForSignIn();
                } else {
                    isSignUp = true;
                    updateUIForSignUp();
                }
            }

            // Update UI for Sign In
            function updateUIForSignIn() {
                console.log('Updating UI for Sign In');
                verificationTypeElement.textContent = 'Sign In';
                verificationTypeElement.style.backgroundColor = '#27ae60';
                pageTitleElement.textContent = 'Verifikasi Masuk';
                pageDescriptionElement.textContent = 'Masukkan kode verifikasi untuk mengakses akun Anda';
                signinInfoElement.classList.remove('hidden');
                signupInfoElement.classList.add('hidden');
                userInfoElement.classList.remove('hidden');
                emailLabelElement.textContent = 'Email Anda';
                phoneLabelElement.textContent = 'Nomor Telepon Anda';
                codeLabelElement.textContent = 'Masukkan Kode Verifikasi 2FA';
                successTitleElement.textContent = 'Berhasil Masuk!';
                successDescriptionElement.textContent = 'Anda berhasil masuk ke akun Anda. Anda akan diarahkan ke dashboard dalam';
                signinNoticeElement.classList.remove('hidden');
                signupNoticeElement.classList.add('hidden');
                
                // Pre-fill user info (in real app, this would come from backend)
                document.getElementById('email').value = 'Roghil@example.com';
                document.getElementById('phone').value = '+62 812-3456-7890';
                
                // Update button text
                sendCodeBtn.textContent = 'Kirim Kode 2FA';
            }

            // Update UI for Sign Up
            function updateUIForSignUp() {
                console.log('Updating UI for Sign Up');
                verificationTypeElement.textContent = 'Sign Up';
                verificationTypeElement.style.backgroundColor = 'rgba(255, 255, 255, 0.2)';
                pageTitleElement.textContent = 'Verifikasi Akun Anda';
                pageDescriptionElement.textContent = 'Lengkapi verifikasi untuk membuat akun rental mobil';
                signinInfoElement.classList.add('hidden');
                signupInfoElement.classList.remove('hidden');
                userInfoElement.classList.add('hidden');
                emailLabelElement.textContent = 'Email Terdaftar';
                phoneLabelElement.textContent = 'Nomor Telepon';
                codeLabelElement.textContent = 'Masukkan Kode Verifikasi';
                successTitleElement.textContent = 'Verifikasi Berhasil!';
                successDescriptionElement.textContent = 'Akun Anda telah terverifikasi. Anda akan diarahkan ke halaman utama dalam';
                signinNoticeElement.classList.add('hidden');
                signupNoticeElement.classList.remove('hidden');
                
                // Clear form fields
                document.getElementById('email').value = '';
                document.getElementById('phone').value = '';
                
                // Update button text
                sendCodeBtn.textContent = 'Kirim Kode Verifikasi';
            }

            // Method selection
            methodOptions.forEach(option => {
                option.addEventListener('click', function() {
                    methodOptions.forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    currentMethod = this.getAttribute('data-method');
                    
                    if (currentMethod === 'email') {
                        emailForm.classList.remove('hidden');
                        smsForm.classList.add('hidden');
                    } else {
                        emailForm.classList.add('hidden');
                        smsForm.classList.remove('hidden');
                    }
                });
            });

            // Send verification code
            sendCodeBtn.addEventListener('click', function() {
                const email = document.getElementById('email').value;
                const phone = document.getElementById('phone').value;
                
                // Basic validation
                if (currentMethod === 'email' && !email) {
                    alert('Harap masukkan alamat email');
                    return;
                }
                
                if (currentMethod === 'sms' && !phone) {
                    alert('Harap masukkan nomor telepon');
                    return;
                }
                
                // Generate random 6-digit code
                generatedCode = Math.floor(100000 + Math.random() * 900000).toString();
                
                // Show verification code section
                verificationCodeSection.classList.remove('hidden');
                sendCodeBtn.textContent = isSignUp ? 'Kode Verifikasi Dikirim!' : 'Kode 2FA Dikirim!';
                sendCodeBtn.disabled = true;
                
                // Reset code inputs
                codeInputs.forEach(input => {
                    input.value = '';
                });
                codeInputs[0].focus();
                
                // In a real application, you would send the code via email/SMS here
                console.log(`Kode verifikasi untuk ${currentMethod === 'email' ? email : phone}: ${generatedCode}`);
                console.log(`Tipe: ${isSignUp ? 'Sign Up' : 'Sign In'}`);
                
                // Re-enable button after 30 seconds
                setTimeout(() => {
                    sendCodeBtn.textContent = isSignUp ? 'Kirim Kode Verifikasi' : 'Kirim Kode 2FA';
                    sendCodeBtn.disabled = false;
                }, 30000);
            });

            // Handle code input navigation
            codeInputs.forEach((input, index) => {
                input.addEventListener('input', function() {
                    if (this.value.length === 1) {
                        if (index < codeInputs.length - 1) {
                            codeInputs[index + 1].focus();
                        } else {
                            verifyCodeBtn.focus();
                        }
                    }
                });
                
                input.addEventListener('keydown', function(e) {
                    if (e.key === 'Backspace' && this.value.length === 0 && index > 0) {
                        codeInputs[index - 1].focus();
                    }
                });
            });

            // Verify code
            verifyCodeBtn.addEventListener('click', function() {
                let enteredCode = '';
                codeInputs.forEach(input => {
                    enteredCode += input.value;
                });
                
                if (enteredCode === generatedCode) {
                    // Success
                    successMessage.classList.remove('hidden');
                    errorMessage.classList.add('hidden');
                    verificationCodeSection.classList.add('hidden');
                    
                    // Start countdown
                    let countdownValue = 5;
                    countdownElement.textContent = countdownValue;
                    
                    countdown = setInterval(() => {
                        countdownValue--;
                        countdownElement.textContent = countdownValue;
                        
                        if (countdownValue <= 0) {
                            clearInterval(countdown);
                            // Redirect based on verification type
                            if (isSignUp) {
                                window.location.href = 'dashboard.html?new_user=true';
                            } else {
                                window.location.href = 'dashboard.html';
                            }
                        }
                    }, 1000);
                } else {
                    // Error
                    errorMessage.classList.remove('hidden');
                    
                    // Clear inputs
                    codeInputs.forEach(input => {
                        input.value = '';
                    });
                    codeInputs[0].focus();
                }
            });

            // Resend code
            resendLink.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Generate new code
                generatedCode = Math.floor(100000 + Math.random() * 900000).toString();
                
                // Clear inputs and refocus
                codeInputs.forEach(input => {
                    input.value = '';
                });
                codeInputs[0].focus();
                
                // Show success message
                const tempMessage = document.createElement('div');
                tempMessage.className = 'success-message';
                tempMessage.style.padding = '10px';
                tempMessage.style.marginTop = '10px';
                tempMessage.innerHTML = '<i class="fas fa-check-circle"></i> Kode baru telah dikirim!';
                verificationCodeSection.appendChild(tempMessage);
                
                // Remove message after 3 seconds
                setTimeout(() => {
                    tempMessage.remove();
                }, 3000);
                
                // In a real application, you would resend the code via email/SMS here
                console.log(`Kode verifikasi baru: ${generatedCode}`);
            });

            // Initialize the page based on URL parameters
            checkVerificationType();
        });
    </script>
</body>
</html>